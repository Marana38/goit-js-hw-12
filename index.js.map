{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46890776-0488e2a41df654acea73f1764';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    throw new Error('Faiied ot fetch images');\n  }\n}\n","export function createImageMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <div class=\"photo-card\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p><b>Likes</b> ${likes}</p>\n          <p><b>Views</b> ${views}</p>\n          <p><b>Comments</b> ${comments}</p>\n          <p><b>Downloads</b> ${downloads}</p>\n          \n        </div>\n      </div>\n    `\n    )\n    .join('');\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { createImageMarkup } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet lightbox = new SimpleLightbox('.gallery a');\n\niziToast.settings({\n    position: 'topRight',\n    timeout: 5000,\n});\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(e) {\n    e.preventDefault();\n    query = e.target.elements.searchQuery.value.trim();\n    e.target.elements.searchQuery.value = '';\n    if (!query) {\n        iziToast.error({ title: 'Error', message: 'Please enter a search query!' });\n        return;\n    }\n    page = 1;\n    gallery.innerHTML = '';\n    loadMoreBtn.classList.add('hidden');\n    const endMessage = document.querySelector('.end-message');\n    endMessage.classList.add('hidden');\n    try {\n        const { hits, totalHits } = await fetchImages(query, page, perPage);\n        if (!hits.length) {\n            iziToast.warning({ title: 'No Results', message: 'No images found.' });\n            return;\n        }\n        gallery.innerHTML = createImageMarkup(hits);\n        lightbox.refresh();\n        iziToast.success({ title: 'Success', message: `Found ${totalHits} images!` });\n        if (hits.length >= perPage) loadMoreBtn.classList.remove('hidden');\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong!' });\n    }\n}\n\nasync function onLoadMore() {\n    page += 1;\n    try {\n        const { hits, totalHits } = await fetchImages(query, page, perPage);\n\n        if (gallery.querySelectorAll('.photo-card').length + hits.length >= totalHits) {\n            loadMoreBtn.classList.add('hidden');\n            const endMessage = document.querySelector('.end-message');\n            endMessage.classList.remove('hidden');\n            return;\n        }\n\n        gallery.insertAdjacentHTML('beforeend', createImageMarkup(hits));\n        lightbox.refresh();\n\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n        window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Failed to load more images.' });\n    }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","createImageMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loadMoreBtn","lightbox","SimpleLightbox","iziToast","onSearch","onLoadMore","e","hits","totalHits","cardHeight"],"mappings":"myBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAaF,OAZiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,GAEe,IACjB,MAAe,CACd,MAAM,IAAI,MAAM,wBAAwB,CAC5C,CACA,CCvBO,SAASE,EAAkBC,EAAQ,CACxC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,mBAEOL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,4BAGpBC,CAAK;AAAA,4BACLC,CAAK;AAAA,+BACFC,CAAQ;AAAA,gCACPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAKzC,EACK,KAAK,EAAE,CACZ,CCpBA,IAAIZ,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAEVW,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAE9CC,EAAS,SAAS,CACd,SAAU,WACV,QAAS,GACb,CAAC,EAEDL,EAAK,iBAAiB,SAAUM,CAAQ,EACxCJ,EAAY,iBAAiB,QAASK,CAAU,EAEhD,eAAeD,EAASE,EAAG,CAIvB,GAHAA,EAAE,eAAgB,EAClBrB,EAAQqB,EAAE,OAAO,SAAS,YAAY,MAAM,KAAM,EAClDA,EAAE,OAAO,SAAS,YAAY,MAAQ,GAClC,CAACrB,EAAO,CACRkB,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,+BAAgC,EAC1E,MACR,CACIjB,EAAO,EACPa,EAAQ,UAAY,GACpBC,EAAY,UAAU,IAAI,QAAQ,EACf,SAAS,cAAc,cAAc,EAC7C,UAAU,IAAI,QAAQ,EACjC,GAAI,CACA,KAAM,CAAE,KAAAO,EAAM,UAAAC,CAAW,EAAG,MAAMxB,EAAYC,EAAOC,EAAMC,CAAO,EAClE,GAAI,CAACoB,EAAK,OAAQ,CACdJ,EAAS,QAAQ,CAAE,MAAO,aAAc,QAAS,mBAAoB,EACrE,MACZ,CACQJ,EAAQ,UAAYV,EAAkBkB,CAAI,EAC1CN,EAAS,QAAS,EAClBE,EAAS,QAAQ,CAAE,MAAO,UAAW,QAAS,SAASK,CAAS,WAAY,EACxED,EAAK,QAAUpB,GAASa,EAAY,UAAU,OAAO,QAAQ,CACpE,MAAe,CACZG,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,wBAAyB,CAC3E,CACA,CAEA,eAAeE,GAAa,CACxBnB,GAAQ,EACR,GAAI,CACA,KAAM,CAAE,KAAAqB,EAAM,UAAAC,CAAW,EAAG,MAAMxB,EAAYC,EAAOC,EAAMC,CAAO,EAElE,GAAIY,EAAQ,iBAAiB,aAAa,EAAE,OAASQ,EAAK,QAAUC,EAAW,CAC3ER,EAAY,UAAU,IAAI,QAAQ,EACf,SAAS,cAAc,cAAc,EAC7C,UAAU,OAAO,QAAQ,EACpC,MACZ,CAEQD,EAAQ,mBAAmB,YAAaV,EAAkBkB,CAAI,CAAC,EAC/DN,EAAS,QAAS,EAElB,KAAM,CAAE,OAAQQ,CAAU,EAAKV,EAAQ,kBAAkB,sBAAuB,EAChF,OAAO,SAAS,CAAE,IAAKU,EAAa,EAAG,SAAU,SAAU,CAC9D,MAAe,CACZN,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,8BAA+B,CACjF,CACA"}